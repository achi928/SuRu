<div class = 'container mt-4'>
  <h2 class = 'fw-bold border-bottom pb-2 mb-4 text-center'>カテゴリー一覧・追加</h2>

  <div class = 'row mb-4'>
    <div class = 'col-12 col-md-8 mx-auto'>
      <div class = 'p-3 border rounded bg-light'>
      
        <% if @category.errors.any? %>
          <ul>
            <% @category.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        <% end %>

        <%= form_with model: [:admin, @category] do |f| %>
          <div class = 'form-group'>
            <label>カテゴリー画像</label>
            <%= f.file_field :category_image, accept: 'image/jpeg, image/png, image/webp', class: 'form-control-file' %>
          </div>

          <div class = 'form-group'>
            <label>カテゴリー名</label>
            <%= f.text_field :name, class: 'form-control', placeholder: 'カテゴリー名' %>
          </div>

          <div class = 'text-center'>
            <%= f.submit 'カテゴリー追加', class: 'btn btn-info' %>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <div class = 'row'>
    <div class = 'col-12 col-md-8 mx-auto'>
      <div class = 'table-responsive'>
        <table class = 'table bg-white shadow-sm'>
          <thead class = 'thead-light'>
            <tr>
              <th class = 'text-center'>画像</th>
              <th class = 'text-center'>カテゴリー名</th>
              <th class = 'text-center'></th>
              <th class = 'text-center'></th>
            </tr>
          </thead>
          <tbody>
            <% @categories.each do |category| %>
              <tr>
                <td class = 'text-center'>
                  <%= image_tag category.get_category_image(100,100) %>
                </td>
                <td class = 'align-middle text-center'><%= category.name %></td>
                <td>
                  <%= link_to '編集', edit_admin_category_path(category.id), class: 'btn btn-primary' %>
                </td>
                <td>
                  <%= link_to '削除', admin_category_path(category.id), method: :delete, class: 'btn btn-danger' %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
